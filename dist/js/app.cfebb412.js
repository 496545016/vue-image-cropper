(function(t){function e(e){for(var o,r,c=e[0],s=e[1],h=e[2],p=0,u=[];p<c.length;p++)r=c[p],a[r]&&u.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);l&&l(e);while(u.length)u.shift()();return n.push.apply(n,h||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],o=!0,c=1;c<i.length;c++){var s=i[c];0!==a[s]&&(o=!1)}o&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var o={},a={app:0},n=[];function r(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=o,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var h=0;h<c.length;h++)e(c[h]);var l=s;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"3d39":function(t,e,i){},"40dd":function(t,e,i){"use strict";var o=i("d4b5"),a=i.n(o);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var o=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view",{staticClass:"router-view"})],1)},n=[],r={name:"app",mounted:function(){}},c=r,s=(i("5c0b"),i("2877")),h=Object(s["a"])(c,a,n,!1,null,null,null),l=h.exports,p=i("8c4f"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t._l(t.images,function(t,e){return i("img",{key:e,staticClass:"box",attrs:{value:t,src:t}})}),i("div",{staticClass:"setting"},[i("div",{staticClass:"box box-ver"},[i("div",{staticClass:"box box-fh line box-ac"},[t._v("\n        裁剪宽度：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.width,expression:"cropperConfig.width"}],staticClass:"box box-f1",attrs:{placeholder:"width",type:"tel"},domProps:{value:t.cropperConfig.width},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"width",e.target.value)}}})]),i("div",{staticClass:"box  box-fh line box-ac"},[t._v("\n        裁剪高度：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.height,expression:"cropperConfig.height"}],staticClass:"box box-f1",attrs:{placeholder:"height",type:"tel"},domProps:{value:t.cropperConfig.height},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"height",e.target.value)}}})]),i("div",{staticClass:"box  box-fh line box-ac"},[t._v("\n        图片质量：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.quality,expression:"cropperConfig.quality"}],staticClass:"box box-f1",attrs:{placeholder:"height",type:"tel"},domProps:{value:t.cropperConfig.quality},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"quality",e.target.value)}}})]),i("div",{staticClass:"box  box-fh line box-ac"},[t._v("\n        最大宽度：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.maxWidth,expression:"cropperConfig.maxWidth"}],staticClass:"box box-f1",attrs:{placeholder:"height",type:"tel"},domProps:{value:t.cropperConfig.maxWidth},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"maxWidth",e.target.value)}}})])]),i("div",{staticClass:"box box-ac box-jc"},[i("div",{staticClass:"btn",on:{click:function(e){return t.selectFile()}}},[t._v("选择图片")]),i("div",{staticClass:"btn",on:{click:function(e){return t.uploadImg()}}},[t._v("上传")])])]),i("image-cropper",{ref:"imageCropper",attrs:{cropperConfig:t.cropperConfig,callback:t.loadImage}})],2)},g=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"cropperPage",staticClass:"cropper-page"},[i("div",{staticClass:"icon icon-back",on:{click:function(e){return t.cancel()}}}),i("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.readImage}}),i("img",{ref:"img",staticClass:"cropper-img",style:t.imageStyle,attrs:{alt:""}}),i("div",{staticClass:"cover box box-ac box-jc",style:{height:t.coverHeight+"px"}},[t._v("\n    请调整图片\n  ")]),i("div",{ref:"cropBox",staticClass:"cropper-box",on:{touchstart:function(e){return e.preventDefault(),t.touchStart(e)},touchmove:function(e){return e.preventDefault(),t.touchMove(e)}}}),i("div",{staticClass:"cover cover box box-ac box-jc",style:{height:t.coverHeight+"px"}},[i("div",{staticClass:"box box-f1 box-jc box-fh"},[i("div",{staticClass:"btn",on:{click:t.checkPhoto}},[t._v("重选")])]),i("div",{staticClass:"box box-f1 box-jc box-fh"},[i("div",{staticClass:"btn sure",on:{click:t.confirm}},[t._v("确定")])])])])},d=[],m=i("6ca8"),v=i.n(m),x=function(t,e){return Math.sqrt(Math.pow(t.pageY-e.pageY,2)+Math.pow(t.pageX-e.pageX,2))},b={name:"imageCropper",props:{callback:{type:Function,default:function(){}},cropperConfig:{type:Object,default:function(){return{width:1,height:1,quality:.7,maxWidth:640}}}},data:function(){return{coverHeight:0,cropperHeight:0,imgInitTop:0,amplitude:0,imageState:{left:0,top:0,scale:1,width:0,height:0,originX:0,originY:0},distance:0,imageStyle:{top:"0",transform:"translate3d(0px, 0px, 0px) scale(1)",transformOrigin:"left top"},cropBoxRect:{},touchPos:{x:0,y:0},isShow:!1,minScale:0,info:"",orientation:""}},watch:{imageState:{handler:function(t){this.imageStyle.transform="translate3d(-"+t.left+"px, -"+t.top+"px, 0px) scale("+t.scale+")"},deep:!0}},methods:{cancel:function(){this.file=null,this.isShow=!1},checkPhoto:function(){this.$refs.file.click()},readImage:function(t){var e=this,i=t.target.files[0];v()(i).then(function(i){e.orientation=1,e.$refs.img.onload=function(){e.initCropper()},e.$refs.img.src=i.base64,t.target.value=null})},initCropper:function(){var t=this;this.isShow=!0,this.$nextTick(function(){var e=t.$refs.cropperPage,i=e.clientWidth,o=e.clientHeight,a=t.$refs.cropBox,n=a.clientWidth,r=Math.floor(n*+t.cropperConfig.height/+t.cropperConfig.width);t.$refs.cropBox.style.height=r+"px",t.coverHeight=(o-r)/2;var c=t.coverHeight;t.imageState.left=0,t.imageState.top=0,t.imageStyle.top=c+"px",t.cropBoxRect={left:0,top:c,width:i,height:r};var s=t.$refs.img,h=t.imageState.width=s.naturalWidth,l=t.imageState.height=s.naturalHeight;h>l?(t.minScale=t.imageState.scale=t.cropBoxRect.height/l,t.imageState.left=(h*t.imageState.scale-t.cropBoxRect.width)/2):(t.minScale=t.imageState.scale=t.cropBoxRect.width/h,t.imageState.top=(l*t.imageState.scale-t.cropBoxRect.height)/2)})},confirm:function(){var t=this,e=this.imageState,i=this.cropBoxRect,o=this.cropperConfig.maxWidth,a=o/i.width,n=e.scale*a,r=i.width*a,c=i.height*a,s=e.left*a,h=e.top*a,l=this.$refs.img,p=document.createElement("canvas"),u=p.getContext("2d"),g=this.orientation;switch(g){case 1:p.width=r,p.height=c,u.drawImage(l,s/n,h/n,r/n,c/n,0,0,r,c);break;case 6:p.width=c,p.height=r,u.rotate(90*Math.PI/180),u.drawImage(l,s/n,h/n,r/n,c/n,0,-c,r,c);break;case 8:p.width=c,p.height=r,u.rotate(-90*Math.PI/180),u.drawImage(l,s/n,h/n,r/n,c/n,-r,0,r,c);break;case 3:p.width=r,p.height=c,u.rotate(180*Math.PI/180),u.drawImage(l,s/n,h/n,r/n,c/n,-r,-c,r,c);break}var f=p.toDataURL("image/jpeg",this.cropperConfig.quality);t.callback(f),t.isShow=!1},getFocalPoint:function(t,e){return{x:(t.pageX+e.pageX)/2,y:(t.pageY+e.pageY)/2}},touchStart:function(t){var e=t.touches.length;if(e){var i=t.touches[0];this.touchPos={x:i.clientX,y:i.clientY}}if(e>=2){var o=t.touches[0],a=t.touches[1];this.distance=x(o,a),this.touchPos=this.getFocalPoint(o,a)}},touchMove:function(t){var e=t.touches.length,i=t.touches[0];if(1===e){var o=i.pageX-this.touchPos.x,a=i.pageY-this.touchPos.y,n=this.imageState.left-o,r=this.imageState.top-a,c=this.imageState.scale,s=this.imageState.width*c-this.cropBoxRect.width,h=this.imageState.height*c-this.cropBoxRect.height;this.imageState.left=n<0?0:n>s?s:n,this.imageState.top=r<0?0:r>h?h:r,this.touchPos.x=i.pageX,this.touchPos.y=i.pageY}else if(e>1){var l=t.touches[0],p=t.touches[1],u=x(l,p),g=u/this.distance,f=g*this.imageState.scale,d=this.imageState.width*f-this.cropBoxRect.width,m=this.imageState.height*f-this.cropBoxRect.height,v=this.getFocalPoint(l,p),b=g*(this.imageState.left+v.x)-v.x,w=g*(this.imageState.top-this.imgInitTop+v.y)-v.y+this.imgInitTop;this.distance=u,f<this.minScale?this.imageState.scale=this.minScale:(this.imageState.scale=f,this.imageState.left=b<0?0:b>d?d:b,this.imageState.top=w<0?0:w>m?m:w),this.touchPos=v}}}},w=b,C=(i("c1f7"),Object(s["a"])(w,f,d,!1,null,"4d687686",null)),S=C.exports,y={name:"index",components:{imageCropper:S},data:function(){return{images:[],cropperConfig:{width:1,height:1,quality:.7,maxWidth:750}}},mounted:function(){},methods:{selectFile:function(){this.$refs.imageCropper.checkPhoto()},loadImage:function(t){this.images.push(t)},uploadImg:function(){alert("上传")}}},P=y,k=(i("40dd"),Object(s["a"])(P,u,g,!1,null,"da9489ea",null)),_=k.exports;o["a"].use(p["a"]);var j=new p["a"]({routes:[{path:"/",name:"index",component:_}]});function $(){var t="orientationchange"in window?"orientationchange":"resize",e=function(){var t=document.body||document.documentElement,e=t.clientWidth;return Math.floor(e/7.5)},i=function(){document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+e()+"px")};i(),window.addEventListener(t,i,!1)}$();i("3d39");o["a"].config.productionTip=!1;var I=new o["a"]({router:j,render:function(t){return t(l)}}).$mount("#app");e["default"]=I},"5c0b":function(t,e,i){"use strict";var o=i("5e27"),a=i.n(o);a.a},"5e27":function(t,e,i){},c1f7:function(t,e,i){"use strict";var o=i("f516"),a=i.n(o);a.a},d4b5:function(t,e,i){},f516:function(t,e,i){}});
//# sourceMappingURL=app.cfebb412.js.map